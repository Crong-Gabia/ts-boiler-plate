# Expansion Paths

MVP 이후 "운영 가능한 공장"으로 확장할 때의 옵션과 트레이드오프를 정리합니다.

## 1) PR별 Ephemeral Environment
- 목표: PR 간 테스트 충돌 제거, 병렬 검증
- 방식: namespace `pr-<id>` 생성/배포/삭제 자동화
- 추가 필요:
  - 네임스페이스 생성 권한/쿼터
  - DNS/Ingress 규칙(동적 호스트)
  - 청소(garbage collection) 정책

## 2) Policy-as-Code (Ruler 고도화)
- 목표: 컨벤션/보안/인증 규칙을 PR gate로 강제
- 예:
  - lint/typecheck 필수
  - secret scan
  - API 컨벤션(경로/에러 모델) 검사

## 3) 테스트 체계 확장
- 계약 테스트(consumer-driven)
- 데이터 마이그레이션/시드 자동화
- flaky 방지(리트라이 정책/환경 격리)

## 4) ROADMAP 자동 업데이트의 충돌 방지
- 시스템이 수정하는 섹션을 고정 포맷으로 분리
- 단계 `ID` 기반으로만 상태 갱신
- PR마다 ROADMAP 수정이 발생하면 충돌이 잦아질 수 있어
  - "merge 후" 1회 갱신
  - 또는 별도 상태 저장소(라벨/DB)로 분리
  중 하나를 선택

## 5) 관측/대시보드
- 목적: PM이 "지금 공장이 뭘 하고 있는지" 한 화면에서 확인
- 신호:
  - 큐 상태, 진행 중 작업, 실패율
  - PR 배포된 URL, 테스트 리포트 링크

## 6) 멀티 레포/모노레포 확장
- 백엔드/프론트/인프라가 분리되면
  - 트리거와 산출물(이미지/매니페스트) 소유권을 명확히
  - PR 간 연쇄 배포 전략 필요
