# PR / 커밋 / 리뷰 운영 (General)

이 문서는 특정 레포/도구에 종속되지 않는 **일반적인 PR 운영 규칙**입니다.

## 1) 브랜치 전략
- 기본 브랜치: `develop` (고정)
- 릴리스 브랜치: `main` (릴리스/태그 컷 때만 merge)
- PR 타깃: 항상 `develop`에 머지
- 기능 브랜치: `feature/<short-name>`
- 버그 수정: `fix/<short-name>`
- 긴급 패치: `hotfix/<short-name>` → 검증 후 `develop`·`main` 순으로 머지

## 2) 커밋 메시지
- Conventional Commits 권장
  - feat, fix, docs, refactor, test, chore

## 3) PR 작성 규칙
- PR은 가능한 작게 (리뷰 15~30분 내)
- PR/코멘트 언어: **기본 한글** (필요 시 영문 병기 가능)
- PR 본문에 반드시 포함:
  - 변경 요약
  - 검증 방법(명령어/수동 시나리오)
  - 리스크/롤백

## 4) AI 리뷰 루프 (필수)

> 설치 여부를 사전에 확인할 수 없으므로 **모든 PR에서** `/gemini review`를 요청합니다.

1. PR 생성 후 코멘트로 AI 리뷰 요청 (필수)
   - 예: `/gemini review`
   - SLA: 요청 후 최대 30분~2시간 대기. 2시간 내 응답 없으면 사람 리뷰로 진행(또는 재요청).
   - 확인 주기: 30분 단위로 GitHub 알림/PR 코멘트 확인. 장기 비동기 시 다음 근무 타임에 재확인.
2. 리뷰 코멘트 분류(강제)
   - **must-fix**: 버그/보안/데이터 손상/명확한 타입 오류 → 반드시 반영 후 push, 필요 시 재리뷰 요청
   - **should-fix**: 가독성/유지보수/에러 처리/테스트 보강 → 가능하면 반영, 아니면 사유 기록 후 보류
   - **nice-to-have**: 스타일/미세 개선 → 보통 보류(후속 PR 권장)
3. 반영 방식
   - 같은 feature 브랜치에서 추가 커밋으로 반영 (feat/fix/refactor/test 등 prefix 유지)
   - 반영 후 PR 본문 검증 방법에 실행 커맨드 갱신, 필요 시 `npm run build` 재검증
4. 재리뷰 요청 기준
   - must-fix를 1개라도 고쳤으면 보통 재요청 1회
   - should/nice만 반영한 경우는 선택(변경량 크면 재요청)
5. 다음 작업 시작 전 체크
   - 새 작업을 시작하기 전에 이전 PR의 AI/인간 리뷰 코멘트를 확인하고 must-fix를 우선 처리한다.

## 5) "BLOCKED" 처리
- 스펙 결정/권한/외부 정보가 필요하면 즉시 `BLOCKED`로 표시하고
  - 필요한 입력
  - 선택지
  - 추천안
  을 남긴다.
